Project Summary Report
This project integrates FreeRTOS to manage concurrent tasks involving a touch sensor, a speaker, and a solenoid. The system architecture consists of five primary tasks, each serving a distinct function.
1. Play Tone Task: This task generates sound on the speaker. It operates by continuously waiting for tone parameters, specifically frequency, and duration, which are received through a queue (toneQueue). When valid parameters are received, the task uses the tone() function to produce the sound at the specified frequency and maintains it for the duration specified. After the duration elapses, the noTone() function stops the sound. This task runs in an infinite loop, periodically yielding control to other tasks.
2. Monitor Touch Sensor Task: This task handles monitoring a touch sensor connected to the microcontroller. It continuously reads the sensor’s state and, upon detecting a touch (when the sensor pin reads HIGH), signals the touchSemaphore. This semaphore is used to synchronize with other tasks, particularly to trigger data sending or solenoid activation. The task includes a debounce delay to prevent multiple triggers from a single touch.
3. Control Solenoid Task: This task controls a solenoid connected to the microcontroller. It waits for a semaphore signal (solenoidSemaphore) to activate the solenoid. Once activated, the solenoid is kept on for one second before deactivating. This task ensures that solenoid control is synchronized with other tasks that might trigger it, such as receiving data commands.
4. Send Data Task: This task periodically sends data related to the touch sensor status. It operates every two seconds, waiting for the touchSemaphore to be available, indicating that the touch sensor has been triggered. The task reads the touch sensor status and simulates sending this data, which could be to a server or another system component. This periodic operation helps in maintaining up-to-date sensor status reporting.
5. Receive Data Task: This task manages incoming serial data, including commands to control the solenoid or specify tone parameters. It reads characters from the Serial input, builds a command string, and processes it upon receiving a newline character. The task interprets commands such as "activate" (to trigger the solenoid) or CSV-formatted strings specifying tone parameters. It then activates the solenoid or places tone parameters into the queue for the Play Tone Task.
To ensure timely and efficient system operation, this project shows how to effectively use FreeRTOS for controlling hardware components and coordinating operations in a concurrent context. This project provided insight into how to effectively multitask and synchronize hardware components on an Arduino by utilizing FreeRTOS for task management. I now know how to efficiently communicate with sensors and actuators and handle real-time events using semaphores, queues, and tasks.



